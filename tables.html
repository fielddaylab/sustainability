<html>
<script src = "js/upgrades.js"></script>
<script src = "js/buildings.js"></script>
<script src = "js/variables.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<div id = "budget"> Budget will go here </div>
	
<div id = "timeSurvived"> Time remaining here</div>

<div id = "satisfaction"> Satisfaction here </div>
	
<div id = "waterPlantCapacity"> Water Plant Capacity here </div>
	
<div id = "waterWasteRate"> Water Waste Rate here </div>
	
<div id = "waterPlantNetCapacity"> Water Plant Net Capacity Here </div>

<div id = "rainAmount"> Rain Amount Here </div>

<br/>
<h3>Upgrades:</h3>

<table border="1" id="table">

<tr id="row1">
<th id="header1">Building</th>
<th id="header2">Building</th>
<th id="header3">Building</th>
<th id="header4">Building</th>
<th id="header5">Building</th>
</tr>

<tr id="row2">
<td id="building1">Building 1, Upgrade 1</td>
<td id="building2">Building 2, Upgrade 1</td>
<td id="building3">Building 3, Upgrade 1</td>
<td id="building4">Building 4, Upgrade 1</td>
<td id="building5">Building 5, Upgrade 1</td>
</tr>

<tr id="row3">
<td id="building1">Building 1, Upgrade 2</td>
<td id="building2">Building 2, Upgrade 2</td>
<td id="building3">Building 3, Upgrade 2</td>
<td id="building4">Building 4, Upgrade 2</td>
<td id="building5">Building 5, Upgrade 2</td>
</tr>

<tr id="row4">
<td id="building1">Building 1, Upgrade 3</td>
<td id="building2">Building 2, Upgrade 3</td>
<td id="building3">Building 3, Upgrade 3</td>
<td id="building4">Building 4, Upgrade 3</td>
<td id="building5">Building 5, Upgrade 3</td>
</tr>


<tr id="row5">
<td id="building1">Building 1, Upgrade 4</td>
<td id="building2">Building 2, Upgrade 4</td>
<td id="building3">Building 3, Upgrade 4</td>
<td id="building4">Building 4, Upgrade 4</td>
<td id="building5">Building 5, Upgrade 4</td>
</tr>
</table>

<br/>
<button onclick="refreshBuildings()">Refresh Table (Temp)</button>
<br/>

Development Options:
<button onclick="buildings.unlock(buildings.building2)">Unlock Building 2</button>

<script>
var refreshBuildings;

$(document).ready(function() { 
	var header1 = $("#header1")[0]; //Building1 div
	var header2 = $("#header2")[0]; //Building2 div
	var header3 = $("#header3")[0]; //Building3 div
	var header4 = $("#header4")[0]; //Building4 div
	var header5 = $("#header5")[0]; //Building5 div

	var cells = $("td"); //Save the entire table

	var upgradeIndex = 0;

	//Giving building1 a few upgrades
	buildings.addUpgrade(buildings.building1, upgrades.irrigateAtNight);
	buildings.addUpgrade(buildings.building1, upgrades.irrigateLess);

	//Unlocking building1	
	buildings.unlock(buildings.building1);


	refreshBuildings = function(){
	//Loop through all the upgrades:
	upgradeIndex = 0;
	console.log("Cells.length: " + cells.length);
	console.log(cells[0]);
	console.log(cells[1]);


	for(var i = 0; i < cells.length; i++){
		//If we're working with a Building 1 cell:
		if(cells[i].id == "building1"){

			//If Building 1 is actually unlocked:
			if(buildings.building1.unlocked){

				//If we actually have the upgrade.. (This should be changed)
				if(upgradeIndex+1 <= buildings.building1.upgrades.length){
					cells[i].innerHTML = buildings.building1.upgrades[upgradeIndex].name;
				}

				//If we do not have the upgrade:
				else
					cells[i].innerHTML = "Upgrade not yet unlocked.";
			}

			else
				cells[i].innerHTML = "Building not yet unlocked.";
		}


		//If we're working with a Building 2 cell:
		if(cells[i].id == "building2"){

			//If Building 2 is actually unlocked:
			if(buildings.building2.unlocked){

				//If we actually have the upgrade.. (This should be changed)
				if(upgradeIndex+1 <= buildings.building2.upgrades.length){
					cells[i].innerHTML = buildings.building2.upgrades[upgradeIndex].name;
				}

				//If we do not have the upgrade:
				else
					cells[i].innerHTML = "Upgrade not yet unlocked.";
			}

			else
				cells[i].innerHTML = "Building not yet unlocked.";
		}

		//If we're working with a Building 3 cell:
		if(cells[i].id == "building3"){

			//If Building 3 is actually unlocked:
			if(buildings.building3.unlocked){

				//If we actually have the upgrade.. (This should be changed)
				if(upgradeIndex+1 <= buildings.building3.upgrades.length){
					cells[i].innerHTML = buildings.building3.upgrades[upgradeIndex].name;
				}

				//If we do not have the upgrade:
				else
					cells[i].innerHTML = "Upgrade not yet unlocked.";
			}

			else
				cells[i].innerHTML = "Building not yet unlocked.";
		}

		//If we're working with a Building 4 cell:
		if(cells[i].id == "building4"){

			//If Building 1 is actually unlocked:
			if(buildings.building4.unlocked){

				//If we actually have the upgrade.. (This should be changed)
				if(upgradeIndex+1 <= buildings.building4.upgrades.length){
					cells[i].innerHTML = buildings.building4.upgrades[upgradeIndex].name;
				}

				//If we do not have the upgrade:
				else
					cells[i].innerHTML = "Upgrade not yet unlocked.";
			}

			else
				cells[i].innerHTML = "Building not yet unlocked.";
		}

		//If we're working with a Building 5 cell:
		if(cells[i].id == "building5"){

			//If Building 5 is actually unlocked:
			if(buildings.building5.unlocked){

				//If we actually have the upgrade.. (This should be changed)
				if(upgradeIndex+1 <= buildings.building5.upgrades.length){
					cells[i].innerHTML = buildings.building5.upgrades[upgradeIndex].name;
				}

				//If we do not have the upgrade:
				else
					cells[i].innerHTML = "Upgrade not yet unlocked.";
			}

			else
				cells[i].innerHTML = "Building not yet unlocked.";
		}

		if(i >= 4 && i % 4 == 0)
			upgradeIndex++;
	}

	// for(var i = 0; i < cells.length; i++){
	// 	//If building 1 is unlocked:
	// 	if(buildings.building1.unlocked){
	// 		if(cells.get(i).id == "building1"){
	// 			if(buildings.building1.upgrades[upgradeIndex] != null){
	// 				//Add the upgrade's name here
	// 				cells.get(i).innerHTML = buildings.building1.upgrades[upgradeIndex].name;
	// 			}
	// 			else{
	// 				//Add the text saying upgrade was not unlocked.
	// 				cells.get(i).innerHTML = "Upgrade not yet unlocked";
	// 			}
	// 		continue; //Move on to the next upgrade if we're done looping building1
	// 		}
	// 	}

	// 	//If building 1 is NOT unlocked... 
	// 	else
	// 		cells.get(i).innerHTML = "Building not yet unlocked";


	// 	//If building 2 is unlocked:
	// 	if(buildings.building2.unlocked){
	// 		if(cells.get(i).id == "building2")
	// 			if(buildings.building2.upgrades[upgradeIndex] != null)
	// 				cells.get(i).innerHTML = buildings.building2.upgrades[upgradeIndex].name;
	// 			else
	// 				cells.get(i).innerHTML = "Upgrade not yet unlocked";
	// 		continue; //Move on to the next building if we're done looping building2.
	// 	}

	// 	//If building 2 is NOT unlocked:
	// 	else
	// 		cells.get(i).innerHTML = "Building not yet unlocked";


	// 	//If building 3 is unlocked:
	// 	if(buildings.building3.unlocked){

	// 		//If we're still working with building 3:
	// 		if(cells.get(i).id == "building3")
	// 			if(buildings.building3.upgrades[upgradeIndex] != null)
	// 				cells.get(i).innerHTML = buildings.building3.upgrades[upgradeIndex].name;
	// 			else
	// 				cells.get(i).innerHTML = "Upgrade not yet unlocked";
	// 		continue; //Otherwise move on to the next building.
	// 	}

	// 	//If building 3 is NOT unlocked:
	// 	else
	// 		cells.get(i).innerHTML = "Building not yet unlocked";


	// 	//If building 4 is unlocked:
	// 	if(buildings.building4.unlocked){

	// 		//If we're currently working with building4 cells:
	// 		if(cells.get(i).id == "building4")
	// 			if(buildings.building4.upgrades[upgradeIndex] != null)
	// 				cells.get(i).innerHTML = buildings.building4.upgrades[upgradeIndex].name;
	// 			else
	// 				cells.get(i).innerHTML = "Upgrade not yet unlocked";
	// 		continue; //If we're done with building 4 cells, move on.
	// 	}

	// 	//If building 4 is NOT unlocked:
	// 	else
	// 		cells.get(i).innerHTML = "Building not yet unlocked";


	// 	//If building 5 is unlocked:
	// 	if(buildings.building5.unlocked){

	// 		//If we're working with buidling5 cells:
	// 		if(cells.get(i).id == "building5")
	// 			if(buildings.building5.upgrades[upgradeIndex] != null)
	// 				cells.get(i).innerHTML = buildings.building5.upgrades[upgradeIndex].name;
	// 			else
	// 				cells.get(i).innerHTML = "Upgrade not yet unlocked";
	// 		continue; //If we're done working with building 5 cells, move on.
	// 	}

	// 	//Move 
	// 	else
	// 		cells.get(i).innerHTML = "Building not yet unlocked";

	// 	//Since we only have 4 upgrades, we need to keep track of them.
		
	// 	if(i % 3 == 0 && i >= 3)
	// 		upgradeIndex++;
		
	// }

}


	//Debug output; just to make sure our first cell is getting set correctly
	console.log(cells.get(0).id);


	//Set all of the building names into the proper cells
	header1.innerHTML = buildings.building1.name;
	header2.innerHTML = buildings.building2.name;
	header3.innerHTML = buildings.building3.name;
	header4.innerHTML = buildings.building4.name;
	header5.innerHTML = buildings.building5.name;

});
</script>


</html>